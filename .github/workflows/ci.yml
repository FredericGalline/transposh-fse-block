name: ğŸ” WordPress CI â€“ Plugin/Theme Check

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  validate:
    name: ğŸ” VÃ©rification WordPress (Lint & Structure)
    runs-on: ubuntu-latest

    steps:
      - name: â¬‡ï¸ Cloner le dÃ©pÃ´t
        uses: actions/checkout@v3

      - name: ğŸ” Lint PHP
        run: |
          find . -name "*.php" -not -path "./vendor/*" -print0 | xargs -0 -n1 php -l

      - name: ğŸ“‚ VÃ©rifier fichiers attendus
        run: |
          echo "ğŸ§© Fichiers clÃ©s prÃ©sents :"
          test -f readme.txt && echo "âœ”ï¸ readme.txt trouvÃ©"
          test -f $(basename "$GITHUB_REPOSITORY").php && echo "âœ”ï¸ Fichier principal trouvÃ©"
          echo "ğŸ“¦ Taille du dÃ©pÃ´t :"
          du -sh .

      - name: âœ… Fin du job
        run: echo "âœ”ï¸ VÃ©rification terminÃ©e avec succÃ¨s"
